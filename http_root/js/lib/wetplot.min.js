var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,c){a.raw=c;return a};$jscomp.arrayIteratorImpl=function(a){var c=0;return function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var c="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return c?c.call(a):$jscomp.arrayIterator(a)};
$jscomp.checkStringArgs=function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){if(a==Array.prototype||a==Object.prototype)return a;a[c]=b.value;return a};$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var c=0;c<a.length;++c){var b=a[c];if(b&&b.Math==Math)return b}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,c){var b=$jscomp.propertyToPolyfillSymbol[c];if(null==b)return a[c];b=a[b];return void 0!==b?b:a[c]};
$jscomp.polyfill=function(a,c,b,d){c&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,c,b,d):$jscomp.polyfillUnisolated(a,c,b,d))};$jscomp.polyfillUnisolated=function(a,c,b,d){b=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in b||(b[e]={});b=b[e]}a=a[a.length-1];d=b[a];c=c(d);c!=d&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})};
$jscomp.polyfillIsolated=function(a,c,b,d){var e=a.split(".");a=1===e.length;d=e[0];d=!a&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var g=0;g<e.length-1;g++){var f=e[g];f in d||(d[f]={});d=d[f]}e=e[e.length-1];b=$jscomp.IS_SYMBOL_NATIVE&&"es6"===b?d[e]:null;c=c(b);null!=c&&(a?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:c}):c!==b&&($jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(e):$jscomp.POLYFILL_PREFIX+e,e=$jscomp.propertyToPolyfillSymbol[e],
$jscomp.defineProperty(d,e,{configurable:!0,writable:!0,value:c})))};$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,b){var c=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var e=c.length,g=a.length;b=Math.max(0,Math.min(b|0,c.length));for(var f=0;f<g&&b<e;)if(c[b++]!=a[f++])return!1;return f>=g}},"es6","es3");$jscomp.owns=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)};
$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(a,c){for(var b=1;b<arguments.length;b++){var d=arguments[b];if(d)for(var e in d)$jscomp.owns(d,e)&&(a[e]=d[e])}return a};$jscomp.polyfill("Object.assign",function(a){return a||$jscomp.assign},"es6","es3");$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(a){if(a)return a;var c=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};c.prototype.toString=function(){return this.$jscomp$symbol$id_};var b=0,d=function(a){if(this instanceof d)throw new TypeError("Symbol is not a constructor");return new c("jscomp_symbol_"+(a||"")+"_"+b++,a)};return d},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var c="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),b=0;b<c.length;b++){var d=$jscomp.global[c[b]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&$jscomp.defineProperty(d.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return a},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,c){a instanceof String&&(a+="");var b=0,d={next:function(){if(b<a.length){var e=b++;return{value:c(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,b){return b})}},"es8","es3");$jscomp.polyfill("Number.parseInt",function(a){return a||parseInt},"es6","es3");
var DEFAULT_LINE_CODE="###default###",WETPLOT_CSS="\n    .xAxisText {\n        fill: #000000;\n    }\n\n    .linePath {\n        fill: none;\n    }\n\n    .grid {\n        fill: none;\n        stroke: #666;\n    }\n\n    #hoverCursor {\n        stroke: #000;\n    }\n",COLOR_PALETTES=[["#ff0000","#00ff00","#00ffff","#0000ff","#ff00ff"],"#ff0000 #ff8000 #80ff00 #00ff00 #00ff80 #00ffff #0080ff #0000ff #8000ff #ff00ff #ff0080".split(" ")],TEXTS={TIME:{en:"Time",de:"Zeit",fr:"Temps"}};
function getText(a){var c=TEXTS[a];if(void 0===c)return"###"+a+"###";a=Object.getOwnPropertyNames(c);for(var b,d=!1,e=0;e<window.navigator.languages.length;e++)if(b=window.navigator.languages[e],b.startsWith("en")&&(b="en"),b in a){d=!0;break}d||(b=a[0]);return c[b]}function createSvgElement(a){return document.createElementNS("http://www.w3.org/2000/svg",void 0===a?"svg":a)}function _split_to_digits(a){for(var c=[];a;)c.push(a%10),a=Math.floor(a/10);c.reverse();return c}
var Wetplot=function(){this._config={rows:[],container_id:"wetplot-container",width:1E3,height:500,background_color:"#c7c1a7",hover_box_background_color:"#fafafa",time_offset:Math.round((+new Date-864E5)/1E3),time_lenght:172800,seconds_per_pixel:60,seconds_per_grid_line:3600,num_horizontal_grid_lines:20,caching_enabled:!1,db_name:"wetplot",intervals:"10min 1hour 24hour 7days 1month 1year".split(" "),allow_scrolling_to_far:!1,font_size_px:16};this._line_config={"###default###":{type:"line",color:"#000000",
line_width:2,name:"?",unit:"1",auto_min_max:!1,min:-1,max:25}};this._data=null;this._x_offset=0;this._created_y_axes=[]};
Wetplot.prototype.initialize=function(){this._svgElement=createSvgElement("svg");this._wrapperElement=document.getElementById(this._config.container_id);this._wrapperElement.appendChild(this._svgElement);this._wrapperElement.style.height=this._config.height+"px";this._wrapperElement.style.display="flex";this._svgElement.style.pointerEvents="none";this._svgElement.style.position="block";this._svgElement.style.width=this._config.width+"px";this._svgElement.style.height=this._config.height+"px";this._svgElement.style["background-color"]=
this._config.background_color;this._svgElement.setAttribute("width",this._config.width);this._svgElement.setAttribute("height",this._config.height);this._svgElement.setAttribute("viewBox","0 0 "+this._config.width+" "+this._config.height);this._add_style();this._addPanEventListeners();this._openDb();this._rebuildAllLines();this._create_y_axis();this._draw_x_axis();this._draw_horizontal_grid();this._createHoverCursor()};
Wetplot.prototype._openDb=function(a){a=void 0===a?function(a){}:a;var c=window.indexedDB.open(this._config.db_name,1),b=this._config.intervals;c.onerror=function(a){console.error(a.target.errorCode)};c.onsuccess=function(b){a(b.target.result)};c.onupgradeneeded=function(a){console.log("DB update needed");var c=a.target.result;b.forEach(function(a){c.createObjectStore(a,{keyPath:"Time"})})}};
Wetplot.prototype._addDataToDb=function(a,c){this._openDb(function(b){function d(a){console.debug("Add "+JSON.stringify(a));e.add(a)}b=b.transaction([a],"readwrite");var e=b.objectStore(a);c.forEachObject(function(a){var b=e.get(a.Time);b.onsuccess=function(c){c=b.result;void 0===c?d(a):(console.debug("Update "+JSON.stringify(c)),Object.assign(c,a),e.put(c))};b.onerror=function(b){d(a)}});b.onabort=function(a){console.error(a)}})};
Wetplot.prototype._getDataFromDb=function(a,c,b,d){this._openDb(function(e){var g=e.transaction(a).objectStore(a).getAll(IDBKeyRange.bound(c,b));g.onsuccess=function(a){d(WetplotData.fromObjectArray(g.result))}})};Wetplot.prototype._add_style=function(){var a=document.createElement("style");a.textContent=WETPLOT_CSS;document.head.append(a)};
Wetplot.prototype._draw_x_axis=function(){var a=createSvgElement("g");a.setAttribute("id","xAxisGroup");this._svgElement.appendChild(a);for(var c=createSvgElement("path"),b="",d=this._config.seconds_per_grid_line,e=this._config.time_offset,g=this._config.font_size_px,f=Math.round(e/d)*d;f<e+this._config.time_lenght;f+=d){var h=new Date(1E3*f),l=Math.round(this._seconds_to_x_coords(f));h=h.toLocaleDateString()+" "+h.toLocaleTimeString();h=h.substring(0,h.lastIndexOf(":"));var k=createSvgElement("text");
k.innerHTML=h;k.setAttribute("x",0);k.setAttribute("y",g/4);k.setAttribute("transform","rotate(90,0,0) translate(10 "+-l+")");k.style.fontSize=g+"px";k.classList.add("xAxisText");a.appendChild(k);b+="M"+l+" 0 V "+this._config.height}c.setAttribute("d",b);c.classList.add("grid");this._svgElement.appendChild(c)};
Wetplot.prototype._draw_horizontal_grid=function(){for(var a="",c=this._config.num_horizontal_grid_lines,b=this._config.height/(c+1),d=1;d<=c;d++)a+="M 0 "+Math.round(b*d)+" H "+this._getXmax();c=createSvgElement("path");c.setAttribute("id","horizontalGrid");c.setAttribute("d",a);c.classList.add("grid");this._svgElement.appendChild(c)};Wetplot.prototype._rebuildAllLines=function(){var a=this;this.getAllLineCodes().forEach(function(c){return a._rebuildLine(c)})};
Wetplot.prototype._rebuildLine=function(a){var c=this._data.heads.indexOf(a),b=this._data.heads.indexOf("Time"),d=this._line_config[a];if(d.auto_min_max){var e=$jscomp.makeIterator(this._data.getMinMaxForColumn(c)),g=e.next().value;e=e.next().value;var f=(e-g)/100;d.min=g-f;d.max=e+f}g=!1;if("line"===d.type){var h="M";e=!0;for(f=0;f<this._data.values.length;f++){var l=this._seconds_to_x_coords(this._data.values[f][b]),k=this._value_to_y_coord(a,this._data.values[f][c]);e?e=!1:h+=" L";h+=" "+Math.round(l)+
" "+Math.round(k)}}else if("ybar"===d.type){g=!0;h=void 0;k=f=this._config.time_offset;var m=l=0;e=[];for(var n=0;n<this._data.values.length;n++){var p=this._data.values[n][b],q=(new Date(1E3*p)).getHours();void 0!==h&&h!==q&&(e.push([f,k,l]),f=p,m=Math.max(l,m),l=0);l+=this._data.values[n][c];h=q;k=p}d.auto_min_max&&(d.min=0,d.max=1.01*m);c=this._value_to_y_coord(a,0);h="M 0 "+c;for(b=0;b<e.length;b++)f=e[b][0],k=e[b][1],l=e[b][2],l=this._value_to_y_coord(a,l),f=this._seconds_to_x_coords(f)+1,k=
this._seconds_to_x_coords(k)-1,h+=" H "+f,h+=" V "+l,h+=" H "+k,h+=" V "+c;h+=" Z"}else console.error("Unknown type for line "+a+': "'+d.type+'"');console.log(h);a=document.getElementById("path"+a);null===a&&(a=createSvgElement("path"),this._svgElement.appendChild(a),a.style.stroke=d.color,a.style.strokeWidth=d.line_width,a.classList.add("linePath"),g&&(a.style.fill=d.color,a.style.fillOpacity=.4));a.setAttribute("d",h)};
Wetplot.prototype._create_y_axis=function(){var a=this;this._yAxisElement=createSvgElement("svg");this._yAxisElement.setAttribute("width","0.01em");this._yAxisElement.setAttribute("height",this._config.height);this._yAxisElement.style.backgroundColor=this._config.background_color;this.getAllLineCodes().forEach(function(c){return a._add_y_axis_for_line_if_needed(c)});this._wrapperElement.appendChild(this._yAxisElement)};
Wetplot.prototype._createHoverCursor=function(){var a=this,c=createSvgElement("g");this._svgElement.appendChild(c);c.setAttribute("id","hoverCursor");var b=createSvgElement("path");c.appendChild(b);b.setAttribute("d","M 0 0 V "+this._config.height);document.body.addEventListener("mousemove",function(b){a._cursorMoved(b)})};
Wetplot.prototype._cursorMoved=function(a){var c=document.getElementById("hoverCursor"),b=this._svgElement.getBoundingClientRect();b.x+2<a.clientX&&a.clientX<b.right-2&&b.y+2<a.clientY&&a.clientY<b.bottom-2?(c.style.display="inline",a=a.clientX-b.x,b=a+this._x_offset,c.setAttribute("transform","translate("+b+" 0)"),this._show_values_popup(b,a)):(c.style.display="none",this._hide_values_popup())};
Wetplot.prototype._nearestTwoDataRows=function(a){for(var c=null,b=null,d=this._data.heads.indexOf("Time"),e=0;e<this._data.values.length&&!(c=b,b=this._data.values[e],b[d]>a);e++);return[c,b]};
Wetplot.prototype._show_values_popup=function(a,c){var b=this,d=this._x_coords_to_seconds(a),e=document.getElementById("valuesPopupG"),g=document.getElementById("valuesPopupTime"),f=document.getElementById("valuesPopupBg"),h=function(a){return b._config.font_size_px*a};null==e?(e=createSvgElement("g"),e.setAttribute("id","valuesPopupG"),this._svgElement.appendChild(e),f=createSvgElement("path"),e.appendChild(f),f.style.fill=this._config.hover_box_background_color,f.style.fillOpacity=.75,f.setAttribute("id",
"valuesPopupBg"),g=createSvgElement("text"),g.setAttribute("id","valuesPopupTime"),g.style.fontSize=this._config.font_size_px+"px",e.appendChild(g)):e.style.display="inline";this.getAllLineCodes().forEach(function(a){a="valuesPopup"+a;var c=document.getElementById(a);null==c&&(c=createSvgElement("text"),c.style.fontSize=b._config.font_size_px+"px",c.classList.add("valueText"),c.setAttribute("id",a),e.appendChild(c))});var l=h(.25),k=h(1),m=(new Date(1E3*d)).toLocaleString();m=m.substring(0,m.lastIndexOf(":"));
g.innerHTML=getText("TIME")+": "+m;g.setAttribute("y",k);m=g.innerHTML.length;var n=this._seconds_to_values(d);d=e.getElementsByClassName("valueText");for(var p=0;p<d.length;p++){var q=d.item(p),r=q.id.substring(11),t=this._line_config[r].name+": "+Math.round(100*n[r])/100+" "+this._line_config[r].unit;q.innerHTML=t;m=Math.max(m,t.length);q.style.fill=this._line_config[r].color;k+=h(1);q.setAttribute("y",k)}m=2*Math.ceil(m/4.5);k+=h(.25);n=h(this.getAllLineCodes().length+1.25);p=(this._config.height+
n)/2;.5<c/this._config.width?(e.setAttribute("transform","translate("+(a-h(m+1))+", "+p+")"),f.setAttribute("transform","")):(e.setAttribute("transform","translate("+a+", "+p+")"),f.setAttribute("transform","rotate(180) translate("+h(-(m+1))+" "+-1*n+")"),l+=h(1));g.setAttribute("x",l);for(a=0;a<d.length;a++)d.item(a).setAttribute("x",l);f.setAttribute("d","M 0 0 H "+h(m)+" V "+.4*k+" L "+h(m+1)+" "+.5*k+" L "+h(m)+" "+.6*k+" V "+k+" H 0 V 0")};
Wetplot.prototype._hide_values_popup=function(){var a=document.getElementById("valuesPopupG");null!==a&&(a.style.display="none")};Wetplot.prototype.getAllLineCodes=function(){return Object.getOwnPropertyNames(this._line_config).filter(function(a){return a!==DEFAULT_LINE_CODE})};
Wetplot.prototype.numberToDisplayText=function(a,c,b){void 0===b&&(b=a);if(2E3>=b)return a.toFixed(c);c=["","k","m","g","t"];a=_split_to_digits(a);for(b="";4<a.length+(b?1:0);)b=c[c.indexOf(b)+1],5<=a.splice(a.length-3,3)[0]&&(a=_split_to_digits(Number.parseInt(a.join(""))+1));return a.join("")+b};
Wetplot.prototype._get_min_max_for_unit=function(a){var c=this,b=$jscomp.makeIterator([void 0,void 0]),d=b.next().value,e=b.next().value;this.getAllLineCodes().forEach(function(b){if(c._line_config[b].unit===a){var f=$jscomp.makeIterator([c._line_config[b].min,c._line_config[b].max]);b=f.next().value;f=f.next().value;void 0===d?(d=b,e=f):(d=Math.min(b,d),e=Math.max(f,e))}});return[d,e]};
Wetplot.prototype._count_units=function(){var a=this,c=[];this.getAllLineCodes().forEach(function(b){b=a._line_config[b].unit;-1===c.indexOf(b)&&c.push(b)});return c.length};
Wetplot.prototype._add_y_axis_for_line_if_needed=function(a){var c=this._line_config[a].unit,b="group"+this._unit_to_id(c);if(-1===this._created_y_axes.indexOf(b)&&this._yAxisElement){this._created_y_axes.push(b);var d=this._config.font_size_px;this.getAllLineCodes();this._yAxisElement.setAttribute("width",4*this._count_units()*d);var e=this._created_y_axes.length-1;console.log("creating y axis for unit "+c+";"+e);var g=createSvgElement("g");g.setAttribute("id",b);g.setAttribute("fill",this._line_config[a].color);
this._yAxisElement.appendChild(g);b=createSvgElement("text");g.appendChild(b);b.innerHTML=c;b.style.fontSize=d+"px";b.setAttribute("y",d);b.setAttribute("x",(4*e+.5)*d);c=$jscomp.makeIterator(this._get_min_max_for_unit(c));var f=c.next().value;c=c.next().value;b=1.2*d/(this._config.height/(c-f));c=0;if(.5>b){for(c=1;.05>b;)c++,b*=10;b=(.1>b?.1:.2>b?.2:.5)/Math.pow(10,c-1)}else b=Math.ceil(b);if(0===b)console.warn("something is wrong, i can feel it");else{var h=this._config.height-d;for(f=Math.floor(f);this._value_to_y_coord(a,
f)>h;)f+=b;var l=this._value_to_y_coord(a,f);h="";var k=l;for(e=4*(e+.15)*d;l>2*d;){var m=l;var n=createSvgElement("text");n.innerHTML=this.numberToDisplayText(f,c);n.setAttribute("y",l+.4*d);n.setAttribute("x",e+d/3);n.style.fontSize=d+"px";g.appendChild(n);h+="M "+e+" "+l+" h "+(d/-3).toFixed(2)+" ";f+=b;l=this._value_to_y_coord(a,f)}h+="M "+e+" "+m+" V "+k;d=createSvgElement("path");d.setAttribute("d",h);d.setAttribute("id","yLadder"+a);d.setAttribute("stroke",this._line_config[a].color);g.appendChild(d)}}};
Wetplot.prototype._unit_to_id=function(a){for(a=encodeURI(a.replace("\u00b0","deg").replace("%","percent"));-1!==a.indexOf("%");)a=a.replace("%","");return a};Wetplot.prototype.config=function(a,c){void 0!==c&&(this._config[a]=c);return this._config[a]};Wetplot.prototype.addLine=function(a){if(a===DEFAULT_LINE_CODE)throw Error("invalid lineId");this._line_config[a]=Object.assign({},this._line_config[DEFAULT_LINE_CODE]);this._line_config[a].name=a;this._add_y_axis_for_line_if_needed(a)};
Wetplot.prototype.lineConfig=function(a,c,b){void 0!==b&&(this._line_config[a][c]=b);return this._line_config[a][c]};Wetplot.prototype.add2dArrayData=function(a,c){a=new WetplotData(a,c);this._data=null===this._data?a:WetplotData.concatenate(this._data,a)};Wetplot.prototype.usePalette=function(a){a=COLOR_PALETTES[a];var c=this.getAllLineCodes();if(a)for(var b=0;b<c.length;b++)this.lineConfig(c[b],"color",a[b%a.length])};
Wetplot.prototype._moveViewBoxPixels=function(a){if(a=void 0===a?0:a){var c=$jscomp.makeIterator(this._svgElement.getAttribute("viewBox").split(" ")),b=c.next().value,d=c.next().value,e=c.next().value;c=c.next().value;b=Number.parseInt(b)+a;this._config.allow_scrolling_to_far||(b=Math.max(0,b),a=this._getXmax()-this._config.width,b=Math.min(b,a));d=[b,d,e,c].join(" ");this._x_offset=b;this._svgElement.setAttribute("viewBox",d)}};
Wetplot.prototype._getXmax=function(){return this._seconds_to_x_coords(this._config.time_offset+this._config.time_lenght)};
Wetplot.prototype._addPanEventListeners=function(){var a=this,c=this._wrapperElement,b;c.onwheel=function(b){b.preventDefault();a._moveViewBoxPixels(10*b.deltaX);a._moveViewBoxPixels(10*b.deltaY);a._cursorMoved(b)};c.onmousedown=function(d){function e(){document.removeEventListener("mousemove",g);c.onmouseup=null}d.preventDefault();b=d.pageX;var g=function(c){2>=c.pageX||c.pageX-2>window.innerWidth?e():(a._moveViewBoxPixels(b-c.pageX),b=c.pageX)};document.addEventListener("mousemove",g);c.onmouseup=
e}};Wetplot.prototype._seconds_to_x_coords=function(a){return Math.round((a-this._config.time_offset)/this._config.seconds_per_pixel)};Wetplot.prototype._x_coords_to_seconds=function(a){return a*this._config.seconds_per_pixel+this._config.time_offset};Wetplot.prototype._value_to_y_coord=function(a,c){var b=$jscomp.makeIterator(this._get_min_max_for_unit(this._line_config[a].unit));a=b.next().value;b=b.next().value;return this._config.height-(c-a)/(b-a)*this._config.height};
Wetplot.prototype._y_coord_to_value=function(a,c){var b=$jscomp.makeIterator(this._get_min_max_for_unit(this._line_config[a].unit));a=b.next().value;b=b.next().value;return(this._config.height-c)/this._config.height*(b-a)+a};
Wetplot.prototype._seconds_to_values=function(a){var c=this,b=$jscomp.makeIterator(this._nearestTwoDataRows(a)),d=b.next().value,e=b.next().value,g={};b=this._data.heads.indexOf("Time");var f=d[b],h=(a-f)/(e[b]-f);this.getAllLineCodes().forEach(function(a){var b=c._data.heads.indexOf(a),f=d[b];g[a]=f+(e[b]-f)*h});return g};var WetplotData=function(a,c){a=void 0===a?[]:a;c=void 0===c?[]:c;this.heads=a;this.values=c};WetplotData.prototype.getValue=function(a,c){return this.values[a][this.heads.indexOf(c)]};
WetplotData.concatenate=function(a,c){var b=new WetplotData,d=[],e=[];a.heads.forEach(function(a){-1===c.heads.indexOf(a)&&e.push(a)});c.heads.forEach(function(b){-1===a.heads.indexOf(b)&&d.push(b)});this._add_columns(a,d);this._add_columns(c,e);var g=a.getValue(0,"Time"),f=c.getValue(0,"Time");for(g=Math.min(g,f);0<a.values.length||0<c.values.length;){f=a.getValue(0,"Time")-g;var h=c.getValue(0,"Time")-g;f<=h&&b.values.push()}return b};
WetplotData._add_columns=function(a,c,b){b=void 0===b?null:b;var d=c.length;if(!(0>=d)){for(var e=a.values.length,g=0;g<e;g++)for(var f=0;f<d;f++)a.values[g].push(b);c.forEach(function(b){return a.heads.push(b)})}};WetplotData.prototype.forEachObject=function(a){var c=this,b={};this.values.forEach(function(d){for(var e=0;e<c.heads.length;e++)b[c.heads[e]]=d[e];a(Object.assign({},b))})};
WetplotData.fromObjectArray=function(a){a=void 0===a?[]:a;var c=new WetplotData;a.forEach(function(a){var b=[];Object.getOwnPropertyNames(a).forEach(function(d){var e=c.heads.indexOf(d);-1===e&&(e=c.heads.length,c.heads.push(d));b[e]=a[d]});c.values.push(b)});c.values.sort(function(a,c){return a.Time>c.Time?1:c.Time>a.Time?-1:0});return c};
WetplotData.prototype.getMinMaxForColumn=function(a){a=void 0===a?0:a;for(var c=void 0,b=void 0,d=0;d<this.values.length;d++){var e=this.values[d][a];if(e<c||void 0===c)c=e;if(e>b||void 0===b)b=e}return[c,b]};
